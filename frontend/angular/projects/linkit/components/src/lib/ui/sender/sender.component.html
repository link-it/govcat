<!--
-- GovCat - GovWay API Catalogue
-- https://github.com/link-it/govcat
--
-- Copyright (c) 2021-2026 Link.it srl (https://link.it).
--
-- This program is free software: you can redistribute it and/or modify
-- it under the terms of the GNU General Public License version 3, as published by
-- the Free Software Foundation.
--
-- This program is distributed in the hope that it will be useful,
-- but WITHOUT ANY WARRANTY; without even the implied warranty of
-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-- GNU General Public License for more details.
--
-- You should have received a copy of the GNU General Public License
-- along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<div #msgBar class="message-bar">
  <form class="" [formGroup]="_formGroup" (submit)="__send(_formGroup.value)">
    <div class="d-flex align-items-center position-relative">
      <button class="btn btn-default btn-md btn-icon gl-button btn-default-tertiary" (click)="__browse($event)" type="button" [tooltip]="'APP.TOOLTIP.AttachFiles' | translate" container="body" placement="right">
        <em class="bi bi-paperclip fs-5"></em>
        <input #browse type="file" hidden (change)="__onChange($event)">
      </button>
      <!-- <p #msg class="flex-grow-1 border" contenteditable ngfocus (input)="__inputChange($event)" (click)="__onClickText()" (blur)="__onBlur()">
        {{ _placeholder }}
      </p> -->
      <div class="flex-grow-1 ">
        <input class="form-control form-control-sm" formControlName="messaggio" [placeholder]="'APP.PLACEHOLDER.TypeMessage' | translate">
      </div>
      <button class="btn btn-default btn-md btn-icon gl-button btn-default-tertiary" type="submit" [disabled]="!_formGroup.valid">
        <em class="bi bi-send fs-5"></em>
      </button>
    </div>
    <div class="chips-list d-flex flex-wrap align-items-center">
      <div class="chip d-flex align-items-center" *ngFor="let _allegato of _allegati; let i= index">
        <em class="bi bi-file-earmark"></em>
        <div class="chip-name">{{ _allegato.file }}</div>
        <span class="btn btn-default btn-sm btn-icon" (click)="__chipClick(i)"><em class="bi bi-x-lg"></em></span>
      </div>
    </div>
  </form>
</div>
