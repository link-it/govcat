<!--
-- GovCat - GovWay API Catalogue
-- https://github.com/link-it/govcat
--
-- Copyright (c) 2021-2026 Link.it srl (https://link.it).
--
-- This program is free software: you can redistribute it and/or modify
-- it under the terms of the GNU General Public License version 3, as published by
-- the Free Software Foundation.
--
-- This program is distributed in the hope that it will be useful,
-- but WITHOUT ANY WARRANTY; without even the implied warranty of
-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-- GNU General Public License for more details.
--
-- You should have received a copy of the GNU General Public License
-- along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<div (click)="__triggering()" class="trigger">
  <div [class]="(disabled || readonly) ? 'blanket disabled' : 'blanket'"></div>
  <div class="form-group filename">
    <label class="label-bold" for="filename">{{ label }} <span *ngIf="required">*</span></label>
    <div class="input-group mb-3">
      <button class="btn btn-default btn-md gl-button input-group-text bg-white-" type="button" [class.gl-field-error-outline]="hasControlError()" [class.disabled]="disabled"><em class="bi bi-file-earmark"></em></button>
      <input autocomplete="off" id="filename" class="form-control text-truncate" [class.gl-field-error-outline]="hasControlError()" type="text" [value]="multiple ? ('APP.MESSAGE.ChooseFiles' | translate) : (control.value.file || control.value.filename  || '')" [required]="required" [disabled]="disabled">
      <button class="btn btn-default btn-md gl-button" type="button" [class]="disabled?'disabled':''" [class.gl-field-error-outline]="hasControlError()">
        <span *ngIf="((control && control.value && control.value.file) || _selected)"><em class="bi bi-x-lg"></em></span>
        <span *ngIf="!((control && control.value && control.value.file) || _selected)"><em class="bi bi-paperclip"></em></span>
      </button>
    </div>
    <p class="help" *ngIf="hint">{{ hint }}</p>
  </div>
  <input #browse type="file" hidden (change)="__onChange($event)" [disabled]="disabled" accept="{{_file_extension}}" [multiple]="multiple">
</div>
